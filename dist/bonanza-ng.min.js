!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=a("./src")},{"./src":4}],2:[function(a,b,c){"use strict";var d={container:"bz-container",hide:"bz-hide",list:"bz-list",item:"bz-list-item",selected:"bz-list-item-selected",loading:"bz-list-loading",loadMore:"bz-list-load-more",noResults:"bz-list-no-results",inputLoading:"bz-loading",match:"bz-text-match"},e={item:"{{.}}",label:"{{.}}",noResults:'No results {{#search}}for "{{/search}}{{search}}{{#search}}"{{/search}}',loadMore:"...",loading:"Loading ..."};b.exports={templates:e,css:d,openOnFocus:!0,closeOnBlur:!0,showLoading:!0,showloadMore:!0,includeAnchors:!1,limit:10,scrollDistance:0,hasMoreItems:function(a){return!!a.length&&a.length===this.limit},getItems:function(a){return a}}},{}],3:[function(a,b,c){"use strict";function d(a,b){b&&(f(a,b)||(a.className=a.className+(a.className?" ":"")+b))}function e(a,b){if(b){var c=new RegExp("\\b"+b+"\\b","g");a.className=a.className.replace(c,"").replace(/  /g," ").trim()}}function f(a,b){var c=a.className.split(" ");return-1!==c.indexOf(b)}b.exports={addClass:d,removeClass:e,hasClass:f}},{}],4:[function(a,b,c){(function(c){"use strict";function d(a,b,c){function d(){return!f.hasClass(t,b.css.hide)}function l(){d()||s.emit("show")}function m(a){return function(c,d){var e=a.filter(function(a){var d=j(b.templates.label,a,!1);return k.queryRegExp(c.search).test(d)}).slice(c.offset,c.offset+c.limit);d(null,e)}}function n(a){var b=t.scrollTop+t.clientHeight-t.scrollHeight===0,c=0===t.scrollTop,d=a.wheelDelta;return b&&1>d||c&&d>1?(a.stopPropagation(),a.preventDefault(),a.returnValue=!1,!1):void 0}if(!a)throw new Error("An element is required to initialize bonanza");if(c||(c=b,b={}),!c)throw new Error("A source is required to initialize bonanza");Array.isArray(c)&&(c=m(c)),b.templates&&(b.templates.item&&void 0===b.templates.label&&(b.templates.label=b.templates.item),b.templates=k.merge(g.templates,b.templates)),b.css&&(b.css=k.merge(g.css,b.css)),b=k.merge(g,b);var o,p,q,r,s=new e,t=document.createElement("div");t.className=b.css.container||"",a.parentNode.appendChild(t),f.addClass(t,b.css.hide),s.container=t,s.input=a,s.options=b;var u=i.create(s,b);return t.addEventListener("scroll",function(a){var c=a.target.scrollTop+a.target.clientHeight-a.target.scrollHeight;c>=-1*b.scrollDistance&&u.hasMoreItems()&&q&&s.emit("scrollbottom")}),t.onmousewheel=n,a.addEventListener("focus",function(){s.emit("open")}),a.addEventListener("blur",function(a){b.closeOnBlur&&s.emit("close")}),a.addEventListener("keyup",function(c){var d=h[c.keyCode];d?"enter"!==d&&(r=null):s.emit("search",{offset:0,limit:b.limit,search:a.value})}),a.addEventListener("keydown",function(c){var e,f,g=h[c.keyCode];e=o?u.items.indexOf(o):0,"up"===g?(f=(e||0)-1,-1===f&&u.hasMoreItems()?f=0:0>f&&(f=u.items.length-1),u.items.length&&s.emit("select",u.items[f].data)):"down"===g?(f=o?e+1:0,!u.hasMoreItems()&&f>u.items.length-1&&(f=0),(u.hasMoreItems()&&f>=u.items.length-2||!u.items.length)&&s.emit("search",{offset:u.items.length,limit:b.limit,search:q?q.searchTerm:a.value}),u.items[f]&&s.emit("select",u.items[f].data)):"enter"===g&&d()?(o=o||u.items[0],o&&s.emit("change",o.data)):"escape"===g&&d()?s.emit("cancel"):r=null}),s.on("scrollbottom",function(){s.emit("search",{offset:u.items.length,limit:b.limit,search:q.searchTerm})}),s.on("focus",function(){s.emit("open")}),s.on("open",function(){b.openOnFocus&&(setTimeout(a.setSelectionRange.bind(a,0,a.value.length),0),r||s.emit("search",{offset:0,limit:b.limit,search:a.value}))}),s.on("show",function(){f.removeClass(t,b.css.hide),t.style.top=a.offsetTop+a.offsetHeight+"px",t.style.left=a.offsetLeft+"px"}),s.on("close",function(){u.clean(),u.hideLoading(),f.removeClass(a,b.css.inputLoading),f.addClass(t,b.css.hide),o=null,p=null}),s.on("change",function(c){r=c,c&&(a.value=j(b.templates.label,c,!1)),q=null,s.emit("close")}),s.on("select",function(c){if(o&&f.removeClass(o.element,b.css.selected),o=u.getByData(c)){a.value=j(b.templates.label,c,!1),f.addClass(o.element,b.css.selected);var d=o.element.offsetTop,e=o.element.offsetTop+o.element.offsetHeight;e>t.clientHeight+t.scrollTop?t.scrollTop=o.element.offsetTop-t.clientHeight+o.element.offsetHeight:d<t.scrollTop&&(t.scrollTop=o.element.offsetTop)}}),s.on("cancel",function(){q&&(a.value=q.searchTerm,r=q.oldValue,q=null),s.emit("close")}),s.on("search",function(d){p&&p.search===d.search&&p.offset===d.offset||(0===d.offset&&(q={oldValue:r,searchTerm:d.search}),b.showLoading&&(u.showLoading(d),f.addClass(a,b.css.inputLoading)),l(),p=d,c(d,function(c,e){return c?void s.emit("error",c):void(p===d&&(u.hideLoading(),f.removeClass(a,b.css.inputLoading),s.emit("success",e,d)))}))}),s.on("success",function(a,c){var d=b.getItems(a);0===c.offset&&u.clean(),d&&(l(),d.forEach(function(a){u.push(a,c.search)}),b.hasMoreItems(a)?u.showLoadMore(a):u.items.length||u.showNoResults(c))}),s}var e=a("events").EventEmitter,f=a("./dom.js"),g=a("./defaults.js"),h=a("./keys.js"),i=a("./list.js"),j=a("./render.js"),k=a("./util.js");d.defaults=g,d.render=j,c.bonanza=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./defaults.js":2,"./dom.js":3,"./keys.js":5,"./list.js":6,"./render.js":7,"./util.js":8,events:9}],5:[function(a,b,c){"use strict";b.exports={38:"up",40:"down",13:"enter",27:"escape"}},{}],6:[function(a,b,c){"use strict";function d(a,b){function c(c,e){var f,h=q(b.templates.item,b.css.item,c),i={data:c,element:h};e&&(f=g.queryRegExp(e),h.innerHTML=h.innerHTML.replace(f,d)),b.includeAnchors&&(h.innerHTML="<a>"+h.innerHTML+"</a>"),h.addEventListener("mousedown",function(b){a.emit("change",c)}),k(),u.appendChild(h),w.push(i)}function d(a){return"<span"+(b.css.match?' class="'+b.css.match+'"':"")+">"+a+"</span>"}function h(){w.splice(0,w.length),u.innerHTML="",s=null,t=null,v=null}function i(a){return w.filter(function(b){return b.data===a})[0]}function j(a){return m(),o(),t||(t=q(b.templates.loading,b.css.loading,a)),t}function k(){t&&(u.removeChild(t),t=null)}function l(a){return k(),s||(s=r(b.templates.loadMore,b.css.loadMore,a)),b.showLoadMore||e.addClass(s,b.css.hide),s}function m(){s&&(u.removeChild(s),s=null)}function n(a){k(),s||(v=q(b.templates.noResults,b.css.noResults,a))}function o(){v&&(u.removeChild(v),v=null)}function p(){return!(!s&&!t)}function q(a,b,c){var d=document.createElement("li");return d.innerHTML=f(a,c,!0),d.className=b||"",u.appendChild(d),d}function r(b,c,d){var e=document.createElement("li"),g=document.createElement("a");return g.innerHTML=f(b,d,!0),g.addEventListener("mousedown",function(){a.emit("scrollbottom")}),e.className=c||"",e.appendChild(g),u.appendChild(e),e}var s,t,u,v,w=[];return a.container.innerHTML="<ul"+(b.css.list?' class="'+b.css.list+'"':"")+"></ul>",u=a.container.children[0],{push:c,clean:h,items:w,getByData:i,showLoading:j,hideLoading:k,showLoadMore:l,showNoResults:n,hasMoreItems:p}}var e=a("./dom.js"),f=a("./render.js"),g=a("./util.js");b.exports={create:d}},{"./dom.js":3,"./render.js":7,"./util.js":8}],7:[function(a,b,c){"use strict";function d(a,b,c){return"function"==typeof a?a(b,c):"string"==typeof a?c?f.render(a,b):f.render(a,b).replace(h,e):void 0}function e(a){return g[a]}var f=a("mustache");b.exports=d;var g={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"},h=/&(?:amp|lt|gt|quot|#39|#x2F);/g},{mustache:10}],8:[function(a,b,c){"use strict";function d(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d}function e(a){return new RegExp(f(a),"ig")}function f(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}b.exports={merge:d,queryRegExp:e}},{}],9:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],10:[function(a,b,c){!function(a,b){"object"==typeof c&&c&&"string"!=typeof c.nodeName?b(c):"function"==typeof define&&define.amd?define(["exports"],b):(a.Mustache={},b(a.Mustache))}(this,function(a){function b(a){return"function"==typeof a}function c(a){return p(a)?"array":typeof a}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"==typeof a&&b in a}function f(a,b){return q.call(a,b)}function g(a){return!f(r,a)}function h(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return s[a]})}function i(b,c){function e(){if(r&&!s)for(;q.length;)delete o[q.pop()];else q=[];r=!1,s=!1}function f(a){if("string"==typeof a&&(a=a.split(u,2)),!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(d(a[0])+"\\s*"),i=new RegExp("\\s*"+d(a[1])),m=new RegExp("\\s*"+d("}"+a[1]))}if(!b)return[];var h,i,m,n=[],o=[],q=[],r=!1,s=!1;f(c||a.tags);for(var y,z,A,B,C,D,E=new l(b);!E.eos();){if(y=E.pos,A=E.scanUntil(h))for(var F=0,G=A.length;G>F;++F)B=A.charAt(F),g(B)?q.push(o.length):s=!0,o.push(["text",B,y,y+1]),y+=1,"\n"===B&&e();if(!E.scan(h))break;if(r=!0,z=E.scan(x)||"name",E.scan(t),"="===z?(A=E.scanUntil(v),E.scan(v),E.scanUntil(i)):"{"===z?(A=E.scanUntil(m),E.scan(w),E.scanUntil(i),z="&"):A=E.scanUntil(i),!E.scan(i))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],o.push(C),"#"===z||"^"===z)n.push(C);else if("/"===z){if(D=n.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?s=!0:"="===z&&f(A)}if(D=n.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return k(j(o))}function j(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function k(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function l(a){this.string=a,this.tail=a,this.pos=0}function m(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function n(){this.cache={}}var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)},q=RegExp.prototype.test,r=/\S/,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},t=/\s*/,u=/\s+/,v=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},l.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},m.prototype.push=function(a){return new m(a,this)},m.prototype.lookup=function(a){var c,d=this.cache;if(d.hasOwnProperty(a))c=d[a];else{for(var f,g,h=this,i=!1;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)g===f.length-1&&(i=e(c,f[g])),c=c[f[g++]];else c=h.view[a],i=e(h.view,a);if(i)break;h=h.parent}d[a]=c}return b(c)&&(c=c.call(this.view)),c},n.prototype.clearCache=function(){this.cache={}},n.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=i(a,b)),d},n.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof m?b:new m(b);return this.renderTokens(d,e,c,a)},n.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;j>i;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},n.prototype.renderSection=function(a,c,d,e){function f(a){return g.render(a,c,d)}var g=this,h="",i=c.lookup(a[1]);if(i){if(p(i))for(var j=0,k=i.length;k>j;++j)h+=this.renderTokens(a[4],c.push(i[j]),d,e);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],c.push(i),d,e);else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],c,d,e);return h}},n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);return!e||p(e)&&0===e.length?this.renderTokens(a[4],b,c,d):void 0},n.prototype.renderPartial=function(a,c,d){if(d){var e=b(d)?d(a[1]):d[a[1]];return null!=e?this.renderTokens(this.parse(e),c,d,e):void 0}},n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);return null!=c?c:void 0},n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);return null!=d?a.escape(d):void 0},n.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.2.1",a.tags=["{{","}}"];var y=new n;a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,d){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+c(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,d)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=h,a.Scanner=l,a.Context=m,a.Writer=n})},{}],11:[function(a,b,c){"use strict";var d=a("bonanza");angular.module("bonanza").directive("bonanza",function(a,b){return{restrict:"A",require:"?ngModel",scope:{bonanzaLabel:"&?",bonanzaItemLabel:"&?",bonanzaLoadingLabel:"&?",bonanzaOnSelect:"&",bonanzaRequest:"&",bonanzaIsLoading:"=?"},link:function(a,c,e,f){function g(b){a.$apply(function(){f&&f.$setViewValue(b),a.bonanzaOnSelect({$item:b})}),j=null}function h(a){a?c[0].value=d.render(k.templates.label,a):c[0].value=""}function i(c,d){var e=a.bonanzaRequest({$query:c});b.when(e).then(function(a){d(null,a)})["catch"](function(a){d(a)})}var j;c.unbind("input").unbind("keydown").unbind("change");var k={};e.bonanzaLabel&&(k.templates.label=a.bonanzaLabel,k.templates.item=k.templates.label),e.bonanzaItemLabel&&(k.templates.item=a.bonanzaItemLabel),e.bonanzaLoadingLabel&&(k.templates.loading=a.bonanzaLoadingLabel);var l=d(c[0],k,i);l.on("change",g),l.on("select",function(a){j=a}),c.on("blur",function(){j&&(g(j),j=null)}),l.on("search",function(){a.bonanzaIsLoading=!0}),l.on("success",function(){a.bonanzaIsLoading=!1}),f&&a.$watch(function(){return f.$modelValue},h,!0)}}})},{bonanza:1}]},{},[11]);